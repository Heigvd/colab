<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>ModelSharingMessageBuilder.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">colab-client</a> &gt; <a href="../index.html" class="el_bundle">colab-api</a> &gt; <a href="index.source.html" class="el_package">ch.colabproject.colab.api.model.token.tools</a> &gt; <span class="el_source">ModelSharingMessageBuilder.java</span></div><h1>ModelSharingMessageBuilder.java</h1><pre class="source lang-java linenums">/*
 * The coLAB project
 * Copyright (C) 2022 AlbaSim, MEI, HEIG-VD, HES-SO
 *
 * Licensed under the MIT License
 */
package ch.colabproject.colab.api.model.token.tools;

import ch.colabproject.colab.api.controller.token.TokenMessageBuilder;
import ch.colabproject.colab.api.model.token.ModelSharingToken;
import java.text.MessageFormat;

/**
 * To build the body of the message to send for an model sharing token.
 *
 * @author sandra
 */
public class ModelSharingMessageBuilder {

    // TODO

    /** Title */
    private static final String MESSAGE_HEAD_TITLE = &quot;Co.LAB model sharing&quot;;

    /** Picture */
    private static final String MESSAGE_PICTURE = &quot;&lt;svg\n&quot;
        + &quot;            width=\&quot;230\&quot;\n&quot;
        + &quot;            height=\&quot;230\&quot;\n&quot;
        + &quot;            id=\&quot;Layer_1\&quot;\n&quot;
        + &quot;            xmlns=\&quot;http://www.w3.org/2000/svg\&quot;\n&quot;
        + &quot;            viewBox=\&quot;0 0 384.66 396.62\&quot;\n&quot;
        + &quot;          &gt;\n&quot;
        + &quot;            &lt;path\n&quot;
        + &quot;              fill=\&quot;#50BFD5\&quot;\n&quot;
        + &quot;              d=\&quot;M384.7,192.3c0,106.2-86.1,192.3-192.3,192.3S0,298.6,0,192.3S86.1,0,192.3,0S384.7,86.1,384.7,192.3\n&quot;
        + &quot;            L384.7,192.3z\&quot;\n&quot;
        + &quot;            /&gt;\n&quot;
        + &quot;            &lt;g&gt;\n&quot;
        + &quot;              &lt;path\n&quot;
        + &quot;                fill=\&quot;#F1F2F2\&quot;\n&quot;
        + &quot;                d=\&quot;M83,55.5h222.2c1.7,0,3,1.6,3,3.6v263c0,2-1.3,3.6-3,3.6H83c-1.7,0-3-1.6-3-3.6v-263\n&quot;
        + &quot;                C80,57.1,81.3,55.5,83,55.5L83,55.5z\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;106.4\&quot;\n&quot;
        + &quot;                y=\&quot;78.6\&quot;\n&quot;
        + &quot;                fill=\&quot;#D1B511\&quot;\n&quot;
        + &quot;                width=\&quot;113.7\&quot;\n&quot;
        + &quot;                height=\&quot;57\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;230.5\&quot;\n&quot;
        + &quot;                y=\&quot;183.7\&quot;\n&quot;
        + &quot;                fill=\&quot;#D1B511\&quot;\n&quot;
        + &quot;                width=\&quot;51.3\&quot;\n&quot;
        + &quot;                height=\&quot;57\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;106.4\&quot;\n&quot;
        + &quot;                y=\&quot;145.5\&quot;\n&quot;
        + &quot;                fill=\&quot;#D1B511\&quot;\n&quot;
        + &quot;                width=\&quot;113.7\&quot;\n&quot;
        + &quot;                height=\&quot;96.1\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;229.8\&quot;\n&quot;
        + &quot;                y=\&quot;76.5\&quot;\n&quot;
        + &quot;                fill=\&quot;#D1B511\&quot;\n&quot;
        + &quot;                width=\&quot;51.3\&quot;\n&quot;
        + &quot;                height=\&quot;96.1\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;106.4\&quot;\n&quot;
        + &quot;                y=\&quot;251.9\&quot;\n&quot;
        + &quot;                fill=\&quot;#D1B511\&quot;\n&quot;
        + &quot;                width=\&quot;174.7\&quot;\n&quot;
        + &quot;                height=\&quot;54.5\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;118.2\&quot;\n&quot;
        + &quot;                y=\&quot;91.5\&quot;\n&quot;
        + &quot;                fill=\&quot;#FFE20F\&quot;\n&quot;
        + &quot;                width=\&quot;39.3\&quot;\n&quot;
        + &quot;                height=\&quot;33\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;168.3\&quot;\n&quot;
        + &quot;                y=\&quot;91.5\&quot;\n&quot;
        + &quot;                fill=\&quot;#FFE20F\&quot;\n&quot;
        + &quot;                width=\&quot;38.8\&quot;\n&quot;
        + &quot;                height=\&quot;33\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;rect x=\&quot;239.6\&quot; y=\&quot;195.7\&quot; fill=\&quot;#FFE20F\&quot; width=\&quot;33\&quot; height=\&quot;33\&quot; /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;118.5\&quot;\n&quot;
        + &quot;                y=\&quot;262.6\&quot;\n&quot;
        + &quot;                fill=\&quot;#FFE20F\&quot;\n&quot;
        + &quot;                width=\&quot;38.8\&quot;\n&quot;
        + &quot;                height=\&quot;33\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;            &lt;/g&gt;\n&quot;
        + &quot;            &lt;g&gt;\n&quot;
        + &quot;              &lt;circle fill=\&quot;#E05D11\&quot; cx=\&quot;304.8\&quot; cy=\&quot;305.3\&quot; r=\&quot;79.4\&quot; /&gt;\n&quot;
        + &quot;              &lt;circle fill=\&quot;#FFFFFF\&quot; cx=\&quot;329.1\&quot; cy=\&quot;271.6\&quot; r=\&quot;16.9\&quot; /&gt;\n&quot;
        + &quot;              &lt;circle fill=\&quot;#FFFFFF\&quot; cx=\&quot;270.1\&quot; cy=\&quot;305.5\&quot; r=\&quot;16.9\&quot; /&gt;\n&quot;
        + &quot;              &lt;circle fill=\&quot;#FFFFFF\&quot; cx=\&quot;329.1\&quot; cy=\&quot;340.2\&quot; r=\&quot;16.9\&quot; /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;297.9\&quot;\n&quot;
        + &quot;                y=\&quot;251.9\&quot;\n&quot;
        + &quot;                transform=\&quot;matrix(0.5 0.866 -0.866 0.5 400.3593 -116.5156)\&quot;\n&quot;
        + &quot;                fill=\&quot;#FFFFFF\&quot;\n&quot;
        + &quot;                width=\&quot;6.5\&quot;\n&quot;
        + &quot;                height=\&quot;73\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;rect\n&quot;
        + &quot;                x=\&quot;298.6\&quot;\n&quot;
        + &quot;                y=\&quot;286.9\&quot;\n&quot;
        + &quot;                transform=\&quot;matrix(-0.5 0.866 -0.866 -0.5 732.8752 223.7727)\&quot;\n&quot;
        + &quot;                fill=\&quot;#FFFFFF\&quot;\n&quot;
        + &quot;                width=\&quot;6.5\&quot;\n&quot;
        + &quot;                height=\&quot;73\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;            &lt;/g&gt;\n&quot;
        + &quot;          &lt;/svg&gt;&quot;;

    /** Header 1 */
    private static final String MESSAGE_HEADING = &quot;Hi ! You have been shared a project model.&quot;;

    /** Header 2 */
    private static final String MESSAGE_SUBHEADING = &quot;{0} invites you to use {1}.&quot;;

    /** Information */
    private static final String MESSAGE_INFO = &quot;&lt;p&gt;Click on the link below to start colabbing with the model.&lt;/p&gt;&quot;;

    /** Label of the link */
    private static final String MESSAGE_LINK_LABEL = &quot;Get the model&quot;;

    private ModelSharingMessageBuilder() {
        // private constructor
    }

    /**
     * Build a HTML body to send a message for the model sharing token
     *
     * @param token the model sharing token
     * @param link  the link in order to consume the token
     *
     * @return the HTML body of the message to send
     */
    public static String build(ModelSharingToken token, String link) {
<span class="nc" id="L151">        String subHeading = MessageFormat.format(MESSAGE_SUBHEADING,</span>
<span class="nc bnc" id="L152" title="All 2 branches missed.">            token.getSender() != null</span>
<span class="nc" id="L153">                ? token.getSender()</span>
<span class="nc" id="L154">                : &quot;Someone&quot;,</span>
<span class="nc bnc" id="L155" title="All 2 branches missed.">            token.getProject() != null</span>
<span class="nc" id="L156">                ? &quot;the model &lt;i&gt;&quot; + token.getProject().getName() + &quot;&lt;/i&gt;&quot;</span>
<span class="nc" id="L157">                : &quot;a co.LAB model&quot;);</span>

<span class="nc" id="L159">        return new TokenMessageBuilder(token)</span>
<span class="nc" id="L160">            .headTitle(MESSAGE_HEAD_TITLE)</span>
<span class="nc" id="L161">            .picture(MESSAGE_PICTURE)</span>
<span class="nc" id="L162">            .heading(MESSAGE_HEADING)</span>
<span class="nc" id="L163">            .subheading(subHeading)</span>
<span class="nc" id="L164">            .info(MESSAGE_INFO)</span>
<span class="nc" id="L165">            .linkHref(link)</span>
<span class="nc" id="L166">            .linkLabel(MESSAGE_LINK_LABEL)</span>
            // let default footer
<span class="nc" id="L168">            .build();</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>