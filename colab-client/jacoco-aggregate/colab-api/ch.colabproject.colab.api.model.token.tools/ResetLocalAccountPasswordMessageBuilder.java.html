<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../jacoco-resources/report.gif" type="image/gif"/><title>ResetLocalAccountPasswordMessageBuilder.java</title><link rel="stylesheet" href="../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">colab-client</a> &gt; <a href="../index.html" class="el_bundle">colab-api</a> &gt; <a href="index.source.html" class="el_package">ch.colabproject.colab.api.model.token.tools</a> &gt; <span class="el_source">ResetLocalAccountPasswordMessageBuilder.java</span></div><h1>ResetLocalAccountPasswordMessageBuilder.java</h1><pre class="source lang-java linenums">/*
 * The coLAB project
 * Copyright (C) 2021 AlbaSim, MEI, HEIG-VD, HES-SO
 *
 * Licensed under the MIT License
 */
package ch.colabproject.colab.api.model.token.tools;

import ch.colabproject.colab.api.controller.token.TokenMessageBuilder;
import ch.colabproject.colab.api.model.token.ResetLocalAccountPasswordToken;
import java.text.MessageFormat;

/**
 * To build the body of the message to send to reset the local account password.
 *
 * @author sandra
 */
public final class ResetLocalAccountPasswordMessageBuilder {

    /** Title */
    private static final String MESSAGE_HEAD_TITLE = &quot;co.LAB: reset your password&quot;;

    /** Picture */
    private static final String MESSAGE_PICTURE = &quot;&lt;svg id=\&quot;Layer_1\&quot; width=\&quot;240\&quot; height=\&quot;240\&quot; xmlns=\&quot;http://www.w3.org/2000/svg\&quot; viewBox=\&quot;0 0 370 376.4\&quot;&gt;\n&quot;
        + &quot;            &lt;path\n&quot;
        + &quot;              d=\&quot;M370,188.2c0,103.9-82.8,188.2-185,188.2S0,292.2,0,188.2,82.8,0,185,0s185,84.2,185,188.2h0Z\&quot;\n&quot;
        + &quot;              style=\&quot;fill: #e05d11\&quot;\n&quot;
        + &quot;            /&gt;\n&quot;
        + &quot;            &lt;rect x=\&quot;236.65\&quot; y=\&quot;259.1\&quot; width=\&quot;121.8\&quot; height=\&quot;106.5\&quot; style=\&quot;fill: none\&quot; /&gt;\n&quot;
        + &quot;            &lt;g&gt;\n&quot;
        + &quot;              &lt;g&gt;\n&quot;
        + &quot;                &lt;path\n&quot;
        + &quot;                  d=\&quot;M255.75,178.38h-19.71V113.21c0-28.44-23.14-51.59-51.59-51.59s-51.59,23.14-51.59,51.59v65.17h-19.71V113.21c0-39.31,31.98-71.3,71.3-71.3s71.3,31.98,71.3,71.3v65.17Z\&quot;\n&quot;
        + &quot;                  style=\&quot;fill: #50bfd5\&quot;\n&quot;
        + &quot;                /&gt;\n&quot;
        + &quot;                &lt;rect\n&quot;
        + &quot;                  x=\&quot;82.99\&quot;\n&quot;
        + &quot;                  y=\&quot;147.45\&quot;\n&quot;
        + &quot;                  width=\&quot;202.93\&quot;\n&quot;
        + &quot;                  height=\&quot;137.21\&quot;\n&quot;
        + &quot;                  rx=\&quot;7.64\&quot;\n&quot;
        + &quot;                  ry=\&quot;7.64\&quot;\n&quot;
        + &quot;                  style=\&quot;fill: #ffe20f\&quot;\n&quot;
        + &quot;                /&gt;\n&quot;
        + &quot;              &lt;/g&gt;\n&quot;
        + &quot;              &lt;path\n&quot;
        + &quot;                d=\&quot;M236.04,147.45s16.93-21.12,19.04-43.84v43.84h-19.04Z\&quot;\n&quot;
        + &quot;                style=\&quot;fill: #3e97a3\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;path\n&quot;
        + &quot;                d=\&quot;M285.92,277.02v-74.7c-61.82,52.3-150.96,71.96-201.47,79.17,1.39,1.92,3.63,3.18,6.18,3.18h187.65c4.22,0,7.64-3.42,7.64-7.64Z\&quot;\n&quot;
        + &quot;                style=\&quot;fill: #edc51d\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;path\n&quot;
        + &quot;                d=\&quot;M201.22,195.39c0-9.26-7.51-16.77-16.77-16.77s-16.77,7.51-16.77,16.77c0,5.52,2.68,10.4,6.8,13.46l-5.34,37.92h30.62l-5.34-37.92c4.12-3.06,6.8-7.94,6.8-13.46Z\&quot;\n&quot;
        + &quot;                style=\&quot;fill: #50bfd5\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;              &lt;path\n&quot;
        + &quot;                d=\&quot;M169.14,246.77s23.93-9.15,25.68-35.09l4.94,35.09h-30.62Z\&quot;\n&quot;
        + &quot;                style=\&quot;fill: #3e97a3\&quot;\n&quot;
        + &quot;              /&gt;\n&quot;
        + &quot;            &lt;/g&gt;\n&quot;
        + &quot;            &lt;g&gt;\n&quot;
        + &quot;              &lt;circle cx=\&quot;290.05\&quot; cy=\&quot;297\&quot; r=\&quot;79.4\&quot; style=\&quot;fill: #50bfd5\&quot; /&gt;\n&quot;
        + &quot;              &lt;g&gt;\n&quot;
        + &quot;                &lt;polygon\n&quot;
        + &quot;                  points=\&quot;261.32 299.2 259.95 299.24 259.95 299.24 261.32 299.2\&quot;\n&quot;
        + &quot;                  style=\&quot;fill: #fff\&quot;\n&quot;
        + &quot;                /&gt;\n&quot;
        + &quot;                &lt;path\n&quot;
        + &quot;                  d=\&quot;M264.04,275.93c.88-1.14,1.82-2.23,2.84-3.26,6.54-6.53,15.23-10.13,24.48-10.13,9.28,0,17.99,3.6,24.53,10.13,6.31,6.31,9.88,14.66,10.11,23.59,3.79-.62,7.59-1.23,11.4-1.84-.67-11.28-5.39-21.83-13.41-29.84-8.71-8.71-20.28-13.5-32.6-13.5h0c-12.32,0-23.89,4.8-32.6,13.5-1.02,1.02-1.99,2.09-2.91,3.19l-8.41-8.41-4.77,32.26,32.17-4.85-10.83-10.83Z\&quot;\n&quot;
        + &quot;                  style=\&quot;fill: #fff\&quot;\n&quot;
        + &quot;                /&gt;\n&quot;
        + &quot;                &lt;path\n&quot;
        + &quot;                  d=\&quot;M314.71,322.76c-6.33,5.62-14.4,8.7-22.95,8.7-9.28,0-17.99-3.6-24.53-10.14-5.95-5.96-9.3-13.04-9.97-21.08l-8.28,.93h-.11l-.11,.02c-.65,.02-1.5,.06-2.34,.16-.18,.02-.36,.05-.54,.07,1.06,10.58,5.73,20.47,13.26,28,8.71,8.71,20.29,13.5,32.6,13.5,11.61,0,22.57-4.27,31.08-12.06l8.3,8.3,4.85-32.17-32.26,4.77,10.99,10.99Z\&quot;\n&quot;
        + &quot;                  style=\&quot;fill: #fff\&quot;\n&quot;
        + &quot;                /&gt;\n&quot;
        + &quot;              &lt;/g&gt;\n&quot;
        + &quot;            &lt;/g&gt;\n&quot;
        + &quot;          &lt;/svg&gt;&quot;;

    /** Header 1 */
    private static final String MESSAGE_HEADING = &quot;Reset your password&quot;;

    /** Header 2 */
    private static final String MESSAGE_SUBHEADING = &quot;We received a request to reset the password for {0}.&quot;;

    /** Information */
    private static final String MESSAGE_INFO = &quot;&lt;p&gt;Click on the link below to reset your password.&lt;/p&gt;&quot;;

    /** Label of the link */
    private static final String MESSAGE_LINK_LABEL = &quot;Reset password&quot;;

    /** Additional footer */
    private static final String MESSAGE_ADDITIONAL_FOOTER = &quot;&lt;br/&gt;If you did not make this request, you can safely ignore this email.&quot;;

    private ResetLocalAccountPasswordMessageBuilder() {
        // private constructor
    }

    /**
     * Build a HTML body to send a message to reset the local account password.
     *
     * @param token the reset local account password token
     * @param link  the link in order to consume the token
     *
     * @return the HTML body of the message to send
     */
    public static String build(ResetLocalAccountPasswordToken token, String link) {
<span class="nc" id="L110">        String subHeading = MessageFormat.format(MESSAGE_SUBHEADING,</span>
<span class="nc bnc" id="L111" title="All 2 branches missed.">            (token.getLocalAccount() != null)</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">                ? (token.getLocalAccount().getUser() != null)</span>
<span class="nc" id="L113">                    ? token.getLocalAccount().getUser().getDisplayName()</span>
<span class="nc" id="L114">                    : token.getLocalAccount().getEmail()</span>
<span class="nc" id="L115">                : &quot;your account&quot;);</span>

<span class="nc" id="L117">        return new TokenMessageBuilder(token)</span>
<span class="nc" id="L118">            .headTitle(MESSAGE_HEAD_TITLE)</span>
<span class="nc" id="L119">            .picture(MESSAGE_PICTURE)</span>
<span class="nc" id="L120">            .heading(MESSAGE_HEADING)</span>
<span class="nc" id="L121">            .subheading(subHeading)</span>
<span class="nc" id="L122">            .info(MESSAGE_INFO)</span>
<span class="nc" id="L123">            .linkHref(link)</span>
<span class="nc" id="L124">            .linkLabel(MESSAGE_LINK_LABEL)</span>
<span class="nc" id="L125">            .additionalFooter(MESSAGE_ADDITIONAL_FOOTER)</span>
<span class="nc" id="L126">            .build();</span>
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>